{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
    <h2 class="mb-4">Registro de Atendimentos</h2>

    <form action="/tramite" method="post" onsubmit="return verificarHora()">
        <div class="form-group p-2">
            <label for="processo">ID Processo:</label>
            <input type="text" name="processo" id="processo" class="form-control" required>
        </div>

        <div class="form-group p-2">
            <label for="origem">Repartição de Origem:</label>
            <select id="origem" name="origem" class="form-control select2" required>
                <option value="">Selecione</option>
                {% for item in reparticao %}
                <option value="{{ item.nome }}">{{ item.nome }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group p-2">
            <label for="destino">Repartição de Destino:</label>
            <select id="destino" name="destino" class="form-control select2" required>
                <option value="">Selecione</option>
                {% for item in reparticao %}
                <option value="{{ item.nome }}">{{ item.nome }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group p-2">
            <label for="servico">Serviço:</label>
            <select id="servico" name="servico" class="form-control select2" required>
                <option value="">Selecione</option>
                {% for item in servico %}
                <option value="{{ item.id }}">{{ item.nome }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group p-2">
            <label for="tempo">Inicio do Atendimento:</label>
            <input type="time" name="tempo" id="tempo" class="form-control" required>
        </div>

        <div class="form-group p-2">
            <label for="status">Status:</label>
            <select name="status" id="status" class="form-control" required>
                <option>Em Andamento</option>
                <option>Concluído</option>
                <option>Pendente</option>
            </select>
        </div>

        <button type="submit" class="btn btn-primary p-2">Salvar</button>
    </form>

    <hr>

    <!-- <h3>Tramites Registrados</h3>
    <table class="table table-bordered mt-4">
        <thead>
            <tr>
                <th>Origem</th>
                <th>Destino</th>
                <th>Tempo</th>
                <th>Status</th>
                <th>Horário</th>
            </tr>
        </thead>
        <tbody>
            {% for item in tramite %}
            <tr>
                <td>{{ item.origem }}</td>
                <td>{{ item.destino }}</td>
                <td>{{ item.tempo_atendimento | minutos_para_hora_minuto}} min</td>
                <td>{{ item.status }}</td>
                <td>{{ item.horario.strftime('%d/%m/%Y %H:%M') }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table> -->
</div>
{% endblock %}